{"ast":null,"code":"var _jsxFileName = \"/Users/Joshua/backend/hse-schedule-v2/src/lunch.js\";\nimport React from \"react\";\nimport { Component } from \"react\";\nimport axios from 'axios';\nimport rightArrow from \"./pictures/right.svg\";\nimport leftArrow from \"./pictures/left.svg\";\nimport Line from \"./line.js\";\nvar data = [];\n\nfunction getWeek(s, l) {\n  if (!s) {\n    return 0;\n  }\n\n  console.log(s);\n  s = new Date(s);\n  let d = new Date();\n  let day = d.getDay();\n  let difference = d - s + (s.getTimezoneOffset() - d.getTimezoneOffset()) * 60 * 1000;\n  let oneDay = 1000 * 60 * 60 * 24;\n  let dayNum = Math.floor(difference / oneDay);\n  let week = dayNum / 7 % l;\n  return Math.floor(week);\n}\n\nexport default class Lunch extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      lines: []\n    };\n    this.date = new Date();\n    this.today = this.date.getDay() - 1;\n  }\n\n  async componentDidMount() {\n    const res = await axios.get(`https://hse-schedule-api.herokuapp.com/api/lunch`);\n    let temp = res.data;\n    console.log(data);\n    data = await res.map(l => {\n      if (l.Line && l.Type && l.Items) {\n        return l;\n      }\n    });\n    console.log(data);\n    data = await data.map(l => {\n      if (l.Line != \"Daily\") {\n        console.log(l);\n        l.Week = getWeek(l.Start, l.Items[1][0].length);\n      }\n\n      console.log(\"WORKED\");\n      return l;\n    });\n    console.log(data);\n    this.setState({\n      lines: data\n    });\n    console.log(this.state.lines);\n    console.log(\"today: \" + this.today);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: \"10vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }), this.state.lines.map((lines, index) => /*#__PURE__*/React.createElement(React.Fragment, null, console.log(lines), /*#__PURE__*/React.createElement(Line, {\n      name: lines.Line,\n      menu: lines.Items,\n      weeks: {\n        number: lines.Items[1][0].length,\n        today: lines.Week\n      },\n      today: this.today,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: \"20vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/Joshua/backend/hse-schedule-v2/src/lunch.js"],"names":["React","Component","axios","Line","data","getWeek","s","l","console","log","Date","d","day","getDay","difference","getTimezoneOffset","oneDay","dayNum","Math","floor","week","Lunch","state","lines","date","today","componentDidMount","res","get","temp","map","Type","Items","Week","Start","length","setState","render","height","index","number"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Component } from \"react\";\nimport axios from 'axios';\nimport rightArrow from \"./pictures/right.svg\";\nimport leftArrow from \"./pictures/left.svg\";\nimport Line from \"./line.js\"\n\nvar data = [];\n\nfunction getWeek(s, l) {\n  if(!(s)) {\n    return 0;\n  }\n  console.log(s)\n  s = new Date(s)\n  let d = new Date()\n  let day = d.getDay()\n  let difference = (d - s) + ((s.getTimezoneOffset() - d.getTimezoneOffset()) * 60 * 1000);\n  let oneDay = 1000 * 60 * 60 * 24;\n  let dayNum = Math.floor(difference / oneDay);\n  let week = (dayNum / 7) % l;\n  return Math.floor(week);\n}\n\nexport default class Lunch extends Component {\n  state = {\n    lines: [],\n  }\n\n  date = new Date();\n  today = this.date.getDay() - 1;\n\n  async componentDidMount() {\n    const res = await axios.get(`https://hse-schedule-api.herokuapp.com/api/lunch`)\n    let temp = res.data;\n    console.log(data)\n    data = await res.map(l => {\n      if(l.Line && l.Type && l.Items) {\n        return l;\n      }\n    })\n    console.log(data)\n    data = await data.map(l => {\n      if(l.Line != \"Daily\") {\n        console.log(l)\n          l.Week = getWeek(l.Start, l.Items[1][0].length)\n        }\n        console.log(\"WORKED\")\n      return l;\n    })\n    console.log(data)\n    this.setState({lines: data})\n    console.log(this.state.lines)\n    console.log(\"today: \" + this.today);\n  }\n\n\n  render() {\n\n    return (\n      <div>\n      <div style={{height: \"10vh\"}}></div>\n\n      {this.state.lines.map((lines, index) =>\n        <>\n        {console.log(lines)}\n        <Line name={lines.Line} menu={lines.Items} weeks={{number: lines.Items[1][0].length, today: lines.Week}} today={this.today} />\n        </>\n      )}\n\n      <div style={{height: \"20vh\"}}></div>\n\n        </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
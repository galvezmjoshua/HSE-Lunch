{"ast":null,"code":"var _jsxFileName = \"/Users/Joshua/backend/hse-schedule-v2/src/timeManager.js\";\nimport React from \"react\";\nimport Schedule from \"./schedules/schedules.json\";\nimport moment from \"moment\";\nimport timezone from \"moment-timezone\";\nmoment.tz.setDefault(\"America/New_York\");\nvar scheduleFile = JSON.parse(JSON.stringify({\n  Schedule\n}));\nvar today;\nvar selectedLunch = \"\";\nvar todaysSchedule;\nvar scheduleDays = {\n  1: \"Tuesday - Red\",\n  2: \"Wednesday - Blue\",\n  3: \"Thursday - Blue\",\n  4: \"Friday - Blue\",\n  5: \"Weekend\",\n  6: \"Weekend\",\n  7: \"Monday - Red\",\n  8: \"Tuesday - Red\",\n  9: \"Wednesday - Red\",\n  10: \"Thursday - Blue\",\n  11: \"Friday - Blue\",\n  12: \"Weekend\",\n  13: \"Weekend\",\n  14: \"Monday - Red\",\n  15: \"Tuesday - Red\",\n  16: \"Wednesday - Blue\",\n  17: \"Thursday - Blue\",\n  18: \"Friday - Blue\",\n  19: \"Weekend\",\n  20: \"Weekend\",\n  21: \"Monday - Red\",\n  22: \"Tuesday - Red\",\n  23: \"Weekend\",\n  24: \"Weekend\",\n  25: \"Weekend\",\n  26: \"Weekend\",\n  27: \"Weekend\",\n  28: \"Monday - Red\",\n  29: \"Monday - Red\",\n  30: \"Monday - Red\",\n  31: \"Monday - Red\"\n};\n\nfunction scheduleAtDay(today) {\n  for (var i = 0; i < scheduleFile.Schedule.length; i++) {\n    if (scheduleFile.Schedule[i].metadata.name === today) {\n      return scheduleFile.Schedule[i];\n    }\n  }\n}\n\ntoday = scheduleDays[moment().date()];\n\nclass TimeManager extends React.Component {\n  constructor() {\n    super();\n    window.tm = this;\n    this.getPeriodTime = this.getPeriodTime.bind(this);\n    this.getPeriodType = this.getPeriodType.bind(this);\n    this.getPeriod = this.getPeriod.bind(this);\n    this.timeLeft = this.timeLeft.bind(this);\n    this.findSchedule = this.findSchedule.bind(this);\n    this.getLunchSchedule = this.getLunchSchedule.bind(this);\n    this.setLunch = this.setLunch.bind(this);\n    this.setCalendarColor = this.setCalendarColor.bind(this);\n  }\n\n  setCalendarColor() {\n    for (var i = 1; i <= Object.keys(scheduleDays).length; i++) {\n      var color = \"#D3D3D3\";\n\n      if (scheduleAtDay(scheduleDays[i]).metadata.dayColor == \"blue\") {\n        color = \"#add8e6\";\n      } else if (scheduleAtDay(scheduleDays[i]).metadata.dayColor == \"red\") {\n        color = \"#ffcccb\";\n      }\n\n      var day = document.getElementsByClassName(\"day\" + i);\n\n      if (day) {\n        day[0].style.backgroundColor = color;\n      }\n    }\n  }\n\n  setLunch(e) {\n    selectedLunch = e.value.toLowerCase();\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.tick(), 1000);\n    this.setCalendarColor();\n  }\n\n  tick() {\n    this.setState({});\n  }\n\n  getLunchSchedule() {\n    var lunchSchedule;\n\n    for (var i = 0; i < todaysSchedule.schedule.length; i++) {\n      if (todaysSchedule.schedule[i].type == \"lunches\") {\n        if (selectedLunch === \"a\") {\n          lunchSchedule = todaysSchedule.schedule[i].A;\n        } else if (selectedLunch === \"b\") {\n          lunchSchedule = todaysSchedule.schedule[i].B;\n        } else if (selectedLunch === \"c\") {\n          lunchSchedule = todaysSchedule.schedule[i].C;\n        } else {\n          lunchSchedule = todaysSchedule.schedule[i];\n          return lunchSchedule;\n        }\n\n        for (var x = 0; x < lunchSchedule.length; x++) {\n          // console.log(x);\n          var start = moment();\n          var end = moment(); // console.log(todaysSchedule.schedule[i].A);\n\n          start.set({\n            hour: lunchSchedule[x].startTime.hour,\n            minute: lunchSchedule[x].startTime.minute,\n            second: 0\n          });\n          end.set({\n            hour: lunchSchedule[x].endTime.hour,\n            minute: lunchSchedule[x].endTime.minute,\n            second: 0\n          }); // console.log(scheduleFile.Schedule.schedule[i].type + \" \" + scheduleFile.Schedule.schedule[i].startTime.hour + \":\" + scheduleFile.Schedule.schedule[i].startTime.minute + \" - \" + scheduleFile.Schedule.schedule[i].endTime.hour + \":\" + scheduleFile.Schedule.schedule[i].endTime.minute);\n\n          if (start.valueOf() <= moment().valueOf() && end.valueOf() >= moment().valueOf()) {\n            // console.log(todaysSchedule.schedule[i].A[x]);\n            return lunchSchedule[x];\n          }\n        }\n      }\n    }\n  }\n\n  findSchedule() {\n    for (var i = 0; i < scheduleFile.Schedule.length; i++) {\n      if (scheduleFile.Schedule[i].metadata.name === today) {\n        todaysSchedule = scheduleFile.Schedule[i];\n      }\n    }\n\n    return todaysSchedule; //\n    // console.log(todaysSchedule);\n  }\n\n  getPeriodTime() {\n    var currentPeriod;\n\n    if (this.getPeriod() !== \"end\") {\n      currentPeriod = this.getPeriod();\n    } else {\n      currentPeriod = false;\n    }\n\n    if (currentPeriod !== true && currentPeriod !== false) {\n      var end = moment();\n      end.set({\n        hour: currentPeriod.endTime.hour,\n        minute: currentPeriod.endTime.minute,\n        second: 0\n      });\n      return end;\n    } else {\n      return true;\n    }\n  }\n\n  timeLeft() {\n    if (this.getPeriodTime() === true) {\n      return \"End\";\n    }\n\n    var time = this.getPeriodTime();\n    var distance = time.valueOf() - moment().valueOf();\n    var hours = Math.floor(distance % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));\n    var minutes = Math.floor(distance % (1000 * 60 * 60) / (1000 * 60));\n    var seconds = Math.floor(distance % (1000 * 60) / 1000);\n\n    if (seconds < 10) {\n      seconds = \"0\" + seconds;\n    }\n\n    if (minutes < 10) {\n      minutes = \"0\" + minutes;\n    }\n\n    if (hours < 1) {\n      return minutes + \":\" + seconds;\n    } else {\n      return \"\" + hours + \":\" + minutes + \":\" + seconds;\n    }\n  }\n\n  getPeriod() {\n    // todaysSchedule.type !== \"weekend\" ||\n    this.findSchedule();\n\n    if (todaysSchedule.metadata.type !== \"weekend\" && todaysSchedule.schedule.length !== undefined) {\n      for (var i = 0; i < todaysSchedule.schedule.length; i++) {\n        var start = moment();\n        var end = moment();\n        start.set({\n          hour: todaysSchedule.schedule[i].startTime.hour,\n          minute: todaysSchedule.schedule[i].startTime.minute,\n          second: 0\n        });\n        end.set({\n          hour: todaysSchedule.schedule[i].endTime.hour,\n          minute: todaysSchedule.schedule[i].endTime.minute,\n          second: 0\n        }); // console.log(scheduleFile.Schedule.schedule[i].type + \" \" + scheduleFile.Schedule.schedule[i].startTime.hour + \":\" + scheduleFile.Schedule.schedule[i].startTime.minute + \" - \" + scheduleFile.Schedule.schedule[i].endTime.hour + \":\" + scheduleFile.Schedule.schedule[i].endTime.minute);\n\n        if (start.valueOf() <= moment().valueOf() && end.valueOf() >= moment().valueOf()) {\n          if (todaysSchedule.schedule[i].type === \"lunches\") {\n            return this.getLunchSchedule();\n          }\n\n          return todaysSchedule.schedule[i];\n        }\n      }\n    }\n\n    return \"end\";\n  }\n\n  getPeriodType() {\n    var currentPeriod = this.getPeriod();\n\n    if (currentPeriod !== \"end\") {\n      if (currentPeriod.type === \"class\") {\n        return currentPeriod.periodName;\n      } else if (currentPeriod.type === \"passing\") {\n        return \"Passing go to \" + currentPeriod.to;\n      } else if (currentPeriod.type === \"lunch\") {\n        return \"Lunch\";\n      } else {\n        return currentPeriod.periodName;\n      }\n    } else {\n      return \"No Time Available\";\n    }\n  }\n\n  render() {\n    // console.log(this.getSchedule());\n    return [/*#__PURE__*/React.createElement(\"div\", {\n      key: \"key0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 7\n      }\n    }, moment().format(\"dddd, MMMM Do YYYY\")), /*#__PURE__*/React.createElement(\"div\", {\n      key: \"key1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 7\n      }\n    }, moment().format(\"hh:mm:ss a\")), /*#__PURE__*/React.createElement(\"div\", {\n      key: \"key2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 7\n      }\n    }, this.getPeriodType()), /*#__PURE__*/React.createElement(\"div\", {\n      key: \"key3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 7\n      }\n    }, this.timeLeft()) // <Countdown date = {this.getPeriod()} />\n    ];\n  }\n\n}\n\nexport default TimeManager;","map":{"version":3,"sources":["/Users/Joshua/backend/hse-schedule-v2/src/timeManager.js"],"names":["React","Schedule","moment","timezone","tz","setDefault","scheduleFile","JSON","parse","stringify","today","selectedLunch","todaysSchedule","scheduleDays","scheduleAtDay","i","length","metadata","name","date","TimeManager","Component","constructor","window","tm","getPeriodTime","bind","getPeriodType","getPeriod","timeLeft","findSchedule","getLunchSchedule","setLunch","setCalendarColor","Object","keys","color","dayColor","day","document","getElementsByClassName","style","backgroundColor","e","value","toLowerCase","componentDidMount","timerID","setInterval","tick","setState","lunchSchedule","schedule","type","A","B","C","x","start","end","set","hour","startTime","minute","second","endTime","valueOf","currentPeriod","time","distance","hours","Math","floor","minutes","seconds","undefined","periodName","to","render","format"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Schedule from \"./schedules/schedules.json\";\nimport moment from \"moment\";\nimport timezone from \"moment-timezone\";\n\nmoment.tz.setDefault(\"America/New_York\");\n\nvar scheduleFile = JSON.parse(JSON.stringify({ Schedule }));\nvar today;\nvar selectedLunch = \"\";\nvar todaysSchedule;\n\nvar scheduleDays = {\n\t1:\"Tuesday - Red\",\n\t2:\"Wednesday - Blue\",\n\t3:\"Thursday - Blue\",\n\t4:\"Friday - Blue\",\n\t5:\"Weekend\",\n  6:\"Weekend\",\n  7:\"Monday - Red\",\n\t8:\"Tuesday - Red\",\n\t9:\"Wednesday - Red\",\n\t10:\"Thursday - Blue\",\n\t11:\"Friday - Blue\",\n\t12:\"Weekend\",\n  13:\"Weekend\",\n  14:\"Monday - Red\",\n\t15:\"Tuesday - Red\",\n\t16:\"Wednesday - Blue\",\n\t17:\"Thursday - Blue\",\n\t18:\"Friday - Blue\",\n\t19:\"Weekend\",\n\t20:\"Weekend\",\n\t21:\"Monday - Red\",\n  22:\"Tuesday - Red\",\n\t23:\"Weekend\",\n  24:\"Weekend\",\n  25:\"Weekend\",\n  26:\"Weekend\",\n  27:\"Weekend\",\n  28:\"Monday - Red\",\n  29:\"Monday - Red\",\n  30:\"Monday - Red\",\n  31:\"Monday - Red\"\n};\n\n\n\n\nfunction scheduleAtDay(today){\n\tfor(var i = 0; i < scheduleFile.Schedule.length; i++){\n\t\tif(scheduleFile.Schedule[i].metadata.name === today){\n\t\t\treturn scheduleFile.Schedule[i];\n\t\t}\n\t}\n}\n\n\n\ntoday = scheduleDays[moment().date()];\n\nclass TimeManager extends React.Component {\n\n  constructor() {\n    super();\n    window.tm = this;\n    this.getPeriodTime = this.getPeriodTime.bind(this);\n    this.getPeriodType = this.getPeriodType.bind(this);\n    this.getPeriod = this.getPeriod.bind(this);\n    this.timeLeft = this.timeLeft.bind(this);\n    this.findSchedule = this.findSchedule.bind(this);\n    this.getLunchSchedule = this.getLunchSchedule.bind(this);\n    this.setLunch = this.setLunch.bind(this);\n    this.setCalendarColor = this.setCalendarColor.bind(this);\n  }\n\n\nsetCalendarColor(){\n  for(var i = 1; i <= Object.keys(scheduleDays).length; i++){\n    var color = \"#D3D3D3\";\n    if(scheduleAtDay(scheduleDays[i]).metadata.dayColor == \"blue\"){\n      color = \"#add8e6\";\n    } else if (scheduleAtDay(scheduleDays[i]).metadata.dayColor == \"red\"){\n      color = \"#ffcccb\";\n    }\n    var day = document.getElementsByClassName(\"day\" + i);\n\t\tif (day) {\n\t\t\tday[0].style.backgroundColor = color;\n\t\t}\n}\n\n}\n\nsetLunch(e){\n\n   selectedLunch = e.value.toLowerCase();\n}\n\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.tick(), 1000);\n    this.setCalendarColor();\n  }\n\n  tick() {\n    this.setState({});\n  }\n\n  getLunchSchedule(){\n\n    var lunchSchedule;\n\n    for (var i = 0; i < todaysSchedule.schedule.length; i++) {\n\n      if(todaysSchedule.schedule[i].type == \"lunches\"){\n\n        if(selectedLunch === \"a\"){\n          lunchSchedule = todaysSchedule.schedule[i].A;\n        } else if (selectedLunch === \"b\"){\n          lunchSchedule = todaysSchedule.schedule[i].B;\n        } else if (selectedLunch === \"c\"){\n          lunchSchedule = todaysSchedule.schedule[i].C;\n        } else {\n\n          lunchSchedule = todaysSchedule.schedule[i];\n\t\t\t\t\treturn lunchSchedule;\n        }\n        for(var x = 0; x < lunchSchedule.length; x++){\n          // console.log(x);\n          var start = moment();\n          var end = moment();\n\n          // console.log(todaysSchedule.schedule[i].A);\n\n          start.set({\n            hour: lunchSchedule[x].startTime.hour,\n            minute: lunchSchedule[x].startTime.minute,\n            second: 0,\n          });\n          end.set({\n            hour: lunchSchedule[x].endTime.hour,\n            minute: lunchSchedule[x].endTime.minute,\n            second: 0,\n          });\n\n\n\n          // console.log(scheduleFile.Schedule.schedule[i].type + \" \" + scheduleFile.Schedule.schedule[i].startTime.hour + \":\" + scheduleFile.Schedule.schedule[i].startTime.minute + \" - \" + scheduleFile.Schedule.schedule[i].endTime.hour + \":\" + scheduleFile.Schedule.schedule[i].endTime.minute);\n          if (start.valueOf() <= moment().valueOf() && end.valueOf() >= moment().valueOf()) {\n          // console.log(todaysSchedule.schedule[i].A[x]);\n\n          return lunchSchedule[x];\n          }\n        }\n\n\n    }\n  }\n  }\n\n  findSchedule(){\n    for(var i = 0; i < scheduleFile.Schedule.length; i++){\n      if(scheduleFile.Schedule[i].metadata.name === today){\n        todaysSchedule = scheduleFile.Schedule[i];\n      }\n    }\n    return todaysSchedule;\n    //\n    // console.log(todaysSchedule);\n  }\n\n  getPeriodTime() {\n    var currentPeriod;\n    if(this.getPeriod() !== \"end\"){\n    currentPeriod = this.getPeriod();\n    } else {\n    currentPeriod = false;\n    }\n    if(currentPeriod !== true && currentPeriod !== false){\n      var end = moment();\n\n      end.set({\n        hour: currentPeriod.endTime.hour,\n        minute: currentPeriod.endTime.minute,\n        second: 0,\n      });\n      return end;\n    } else {\n      return true;\n    }\n  }\n\n  timeLeft() {\n    if(this.getPeriodTime() === true){\n      return \"End\";\n    }\n    var time = this.getPeriodTime();\n    var distance = time.valueOf() - moment().valueOf();\n    var hours = Math.floor(\n      (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\n    );\n    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n    var seconds = Math.floor((distance % (1000 * 60)) / 1000);\n    if(seconds < 10){\n      seconds = \"0\" + seconds;\n    }\n    if(minutes < 10){\n      minutes = \"0\" + minutes;\n    }\n    if(hours < 1){\n      return minutes + \":\" + seconds;\n    } else {\n    return \"\" + hours + \":\" + minutes + \":\" + seconds;\n  }\n  }\n\n  getPeriod(){\n    // todaysSchedule.type !== \"weekend\" ||\n    this.findSchedule();\n\t\tif(todaysSchedule.metadata.type !== \"weekend\" && todaysSchedule.schedule.length !== undefined){\n    for (var i = 0; i < todaysSchedule.schedule.length; i++) {\n      var start = moment();\n      var end = moment();\n\n\n\n      start.set({\n        hour: todaysSchedule.schedule[i].startTime.hour,\n        minute: todaysSchedule.schedule[i].startTime.minute,\n        second: 0,\n      });\n      end.set({\n        hour: todaysSchedule.schedule[i].endTime.hour,\n        minute: todaysSchedule.schedule[i].endTime.minute,\n        second: 0,\n      });\n\n      // console.log(scheduleFile.Schedule.schedule[i].type + \" \" + scheduleFile.Schedule.schedule[i].startTime.hour + \":\" + scheduleFile.Schedule.schedule[i].startTime.minute + \" - \" + scheduleFile.Schedule.schedule[i].endTime.hour + \":\" + scheduleFile.Schedule.schedule[i].endTime.minute);\n      if (start.valueOf() <= moment().valueOf() && end.valueOf() >= moment().valueOf()) {\n        if(todaysSchedule.schedule[i].type === \"lunches\"){\n          return this.getLunchSchedule();\n        }\n\n        return todaysSchedule.schedule[i];\n      }\n    }\n\t}\n    return \"end\";\n  }\n\n  getPeriodType(){\n    var currentPeriod = this.getPeriod();\n\n    if(currentPeriod !== \"end\"){\n      if(currentPeriod.type === \"class\"){\n        return currentPeriod.periodName;\n      } else if (currentPeriod.type === \"passing\"){\n        return \"Passing go to \" + currentPeriod.to;\n      } else if (currentPeriod.type === \"lunch\"){\n        return \"Lunch\";\n      } else {\n\t\t\t\treturn currentPeriod.periodName;\n\t\t\t}\n    } else {\n      return \"No Time Available\";\n    }\n  }\n\n  render() {\n    // console.log(this.getSchedule());\n    return [\n      <div key=\"key0\">{moment().format(\"dddd, MMMM Do YYYY\")}</div>,\n      <div key=\"key1\">{moment().format(\"hh:mm:ss a\")}</div>,\n      <div key=\"key2\">{this.getPeriodType()}</div>,\n      <div key=\"key3\">{this.timeLeft()}</div>\n      // <Countdown date = {this.getPeriod()} />\n    ];\n}\n}\n\n\nexport default TimeManager;\n"]},"metadata":{},"sourceType":"module"}